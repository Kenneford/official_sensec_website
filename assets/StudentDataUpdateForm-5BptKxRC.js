import{e as Le,a as Qe,f as O,g as Xe,u as Ze,$ as we,r as j,n as Se,cK as es,j as s,B as u,l as ke,d9 as ss}from"./index-CL8aB76r.js";import"./studentEnrollment-l0sNRNKZ.js";import{C as ls,c as h,I as ze}from"./muiStyling-Biny6EY4.js";import{F as as}from"./FetchProgrammeData-Dhiaheji.js";import{F as rs}from"./FetchClassLevel-Bq1fN1Fd.js";import{F as is}from"./FetchBatch-CdHBPORD.js";import{L as ts}from"./LoadingProgress-DrQz26HU.js";import{R as hs}from"./Redirection-C_WW2eLG.js";import{b as cs}from"./FetchAllStudents-DcT4Vh_v.js";import{G as i}from"./Grid-C0sdyGW0.js";import{M as r}from"./MenuItem-Ci3WSCxq.js";import{A as os}from"./Avatar-BKQq1lUL.js";import{T as ms}from"./TaskAlt-S5e9RsjI.js";import"./FormLabel-DFf2C-vG.js";import"./index-DcfIKM1A.js";import"./useControlled-CyfcTk32.js";import"./useThemeProps-5fjUjDwy.js";import"./getThemeProps-BQ9MDSVY.js";import"./index-DvkxpYwK.js";import"./IconButton-zfBQ5iJg.js";function Es(){var P,_,M,H,G,R,k,z,J,q,U,K,$,V,Y,L,Q,X,Z,w,S,ee,se,le,ae,re,ie,te,he,ce,oe,me,ne;const I=Le(),b=Qe(),m=O(Xe),{studentIndexNo:ns,adminCurrentAction:x,adminCurrentLink:p}=Ze(),Je=p,N=cs(),g=as(),W=rs(),B=is(),T=O(we),{enrollmentStatus:d,error:v,successMessage:qe}=O(a=>a.student),[A,D]=j.useState(null),[F,Ue]=j.useState(""),e=N==null?void 0:N.find(a=>(a==null?void 0:a.uniqueId)===Je),y=(P=e==null?void 0:e.personalInfo)!=null&&P.dateOfBirth?new Date((_=e==null?void 0:e.personalInfo)==null?void 0:_.dateOfBirth).toISOString():"",f=y==null?void 0:y.split("T")[0],[l,C]=j.useState({uniqueId:e==null?void 0:e.uniqueId,firstName:(M=e==null?void 0:e.personalInfo)==null?void 0:M.firstName,lastName:(H=e==null?void 0:e.personalInfo)==null?void 0:H.lastName,otherName:(G=e==null?void 0:e.personalInfo)==null?void 0:G.otherName,dateOfBirth:f,placeOfBirth:(R=e==null?void 0:e.personalInfo)==null?void 0:R.placeOfBirth,nationality:(k=e==null?void 0:e.personalInfo)==null?void 0:k.nationality,gender:(z=e==null?void 0:e.personalInfo)==null?void 0:z.gender,profilePicture:(q=(J=e==null?void 0:e.personalInfo)==null?void 0:J.profilePicture)==null?void 0:q.url,jhsAttended:(U=e==null?void 0:e.studentSchoolData)==null?void 0:U.jhsAttended,completedJhs:(K=e==null?void 0:e.studentSchoolData)==null?void 0:K.completedJhs,jhsIndexNo:($=e==null?void 0:e.studentSchoolData)==null?void 0:$.jhsIndexNo,program:(Y=(V=e==null?void 0:e.studentSchoolData)==null?void 0:V.program)==null?void 0:Y._id,currentClassLevel:(Q=(L=e==null?void 0:e.studentSchoolData)==null?void 0:L.currentClassLevel)==null?void 0:Q._id,batch:(Z=(X=e==null?void 0:e.studentSchoolData)==null?void 0:X.batch)==null?void 0:Z._id,height:(w=e==null?void 0:e.status)==null?void 0:w.height,weight:(S=e==null?void 0:e.status)==null?void 0:S.weight,complexion:(ee=e==null?void 0:e.status)==null?void 0:ee.complexion,motherTongue:(se=e==null?void 0:e.status)==null?void 0:se.motherTongue,otherTongue:(le=e==null?void 0:e.status)==null?void 0:le.otherTongue,residentialStatus:(ae=e==null?void 0:e.status)==null?void 0:ae.residentialStatus,homeTown:(re=e==null?void 0:e.contactAddress)==null?void 0:re.homeTown,district:(ie=e==null?void 0:e.contactAddress)==null?void 0:ie.district,region:(te=e==null?void 0:e.contactAddress)==null?void 0:te.region,currentCity:(he=e==null?void 0:e.contactAddress)==null?void 0:he.currentCity,residentialAddress:(ce=e==null?void 0:e.contactAddress)==null?void 0:ce.residentialAddress,gpsAddress:(oe=e==null?void 0:e.contactAddress)==null?void 0:oe.gpsAddress,mobile:(me=e==null?void 0:e.contactAddress)==null?void 0:me.mobile,email:(ne=e==null?void 0:e.contactAddress)==null?void 0:ne.email});g==null||g.find(a=>(a==null?void 0:a._id)===(l==null?void 0:l.program)),T==null||T.find(a=>(a==null?void 0:a._id)===(l==null?void 0:l.divisionProgram));const[E,Ke]=j.useState(null),$e=a=>{const c=a.target.files[0],o=5*1024*1024;if(c.size>o){alert("File is too large! Please select a file smaller than 5MB.");return}a.target.files.length!==0&&C({...l,[a.target.name]:c});const n=new FileReader;n.readAsDataURL(a.target.files[0]),n.onloadend=()=>{Ke(n.result),C({...l,profilePicture:n.result})}};j.useEffect(()=>{var a,c,o,n,xe,ge,je,de,pe,ve,Ae,Ce,ue,Ie,be,Ne,We,Be,Te,De,ye,fe,Oe,Fe,Ee,Pe,_e,Me,He,Ge,Re;C({uniqueId:e==null?void 0:e.uniqueId,firstName:(a=e==null?void 0:e.personalInfo)==null?void 0:a.firstName,lastName:(c=e==null?void 0:e.personalInfo)==null?void 0:c.lastName,otherName:(o=e==null?void 0:e.personalInfo)==null?void 0:o.otherName,dateOfBirth:f,placeOfBirth:(n=e==null?void 0:e.personalInfo)==null?void 0:n.placeOfBirth,nationality:(xe=e==null?void 0:e.personalInfo)==null?void 0:xe.nationality,gender:(ge=e==null?void 0:e.personalInfo)==null?void 0:ge.gender,profilePicture:(de=(je=e==null?void 0:e.personalInfo)==null?void 0:je.profilePicture)==null?void 0:de.url,jhsAttended:(pe=e==null?void 0:e.studentSchoolData)==null?void 0:pe.jhsAttended,completedJhs:(ve=e==null?void 0:e.studentSchoolData)==null?void 0:ve.completedJhs,jhsIndexNo:(Ae=e==null?void 0:e.studentSchoolData)==null?void 0:Ae.jhsIndexNo,program:(ue=(Ce=e==null?void 0:e.studentSchoolData)==null?void 0:Ce.program)==null?void 0:ue._id,currentClassLevel:(be=(Ie=e==null?void 0:e.studentSchoolData)==null?void 0:Ie.currentClassLevel)==null?void 0:be._id,batch:(We=(Ne=e==null?void 0:e.studentSchoolData)==null?void 0:Ne.batch)==null?void 0:We._id,height:(Be=e==null?void 0:e.status)==null?void 0:Be.height,weight:(Te=e==null?void 0:e.status)==null?void 0:Te.weight,complexion:(De=e==null?void 0:e.status)==null?void 0:De.complexion,motherTongue:(ye=e==null?void 0:e.status)==null?void 0:ye.motherTongue,otherTongue:(fe=e==null?void 0:e.status)==null?void 0:fe.otherTongue,residentialStatus:(Oe=e==null?void 0:e.status)==null?void 0:Oe.residentialStatus,homeTown:(Fe=e==null?void 0:e.contactAddress)==null?void 0:Fe.homeTown,district:(Ee=e==null?void 0:e.contactAddress)==null?void 0:Ee.district,region:(Pe=e==null?void 0:e.contactAddress)==null?void 0:Pe.region,currentCity:(_e=e==null?void 0:e.contactAddress)==null?void 0:_e.currentCity,residentialAddress:(Me=e==null?void 0:e.contactAddress)==null?void 0:Me.residentialAddress,gpsAddress:(He=e==null?void 0:e.contactAddress)==null?void 0:He.gpsAddress,mobile:(Ge=e==null?void 0:e.contactAddress)==null?void 0:Ge.mobile,email:(Re=e==null?void 0:e.contactAddress)==null?void 0:Re.email})},[e,f]);const t=a=>{const{name:c,value:o}=a.target;C({...l,[c]:o})},Ve=l!=null&&l.dateOfBirth?new Date(l==null?void 0:l.dateOfBirth).toISOString():"",Ye=a=>{a.preventDefault(),I(ss({newStudent:l,dateOfBirth:Ve}))};return j.useEffect(()=>{if(d==="pending"&&D(!1),d==="rejected"){setTimeout(()=>{var a,c;(c=(a=v==null?void 0:v.errorMessage)==null?void 0:a.message)==null||c.map(o=>Se.error(o,{position:"top-right",theme:"light",toastId:o}))},2e3),setTimeout(()=>{D(null),I(es())},3e3);return}d==="success"&&(setTimeout(()=>{D(!0)},3e3),setTimeout(()=>{Ue(!0)},6e3),setTimeout(()=>{var a;(a=m==null?void 0:m.roles)!=null&&a.includes("admin")?b(`/sensec/users/${m==null?void 0:m.uniqueId}/admin/${x}/${p}/new_enrollment/parent/add`):b(`/sensec/students/enrollment/online/${l==null?void 0:l.uniqueId}/parent/add`)},9e3))},[b,I,d,v,qe,A,l,x,p,m]),s.jsxs(s.Fragment,{children:[x&&p&&s.jsx(u,{component:"div",id:"adminDashboardHeaderWrap",sx:{position:"sticky",top:0,backgroundColor:"#fff",padding:0},minHeight:"4rem",children:s.jsxs("h1",{className:"dashAction",children:[x==null?void 0:x.replace(/_/g,"-")," / ",s.jsx("span",{children:"Update"})]})}),s.jsx(ls,{component:"div",id:"studentEnrollmentWrap",sx:{width:{xs:"100%",sm:"95%",md:"90%",lg:"90%",xl:"75%"},margin:"auto",paddingTop:"2rem",display:"flex",flexDirection:"column",position:"relative"},children:s.jsx(u,{component:"div",id:"enrollmentFormWrap",sx:{maxWidth:1e3,mx:"auto",mt:5,p:3,border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:s.jsx("form",{onSubmit:Ye,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem",padding:".5rem 0"},children:s.jsxs(i,{container:!0,spacing:3,children:[s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"First Name",name:"firstName",value:(l==null?void 0:l.firstName)||"",onChange:t,className:"textField"})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Surname",name:"lastName",value:(l==null?void 0:l.lastName)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Other Name",name:"otherName",value:(l==null?void 0:l.otherName)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Place Of Birth",name:"placeOfBirth",value:(l==null?void 0:l.placeOfBirth)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,name:"dateOfBirth",type:"date",value:(l==null?void 0:l.dateOfBirth)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Nationality",name:"nationality",value:(l==null?void 0:l.nationality)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{select:!0,fullWidth:!0,label:"Gender",name:"gender",value:(l==null?void 0:l.gender)||"",onChange:t,children:[s.jsx(r,{value:"Male",children:"Male"}),s.jsx(r,{value:"Female",children:"Female"})]})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{select:!0,fullWidth:!0,label:"Mother Tongue",name:"motherTongue",value:(l==null?void 0:l.motherTongue)||"",onChange:t,children:[s.jsx(r,{value:"Twi",children:"Twi"}),s.jsx(r,{value:"Fante",children:"Fante"}),s.jsx(r,{value:"Ga",children:"Ga"}),s.jsx(r,{value:"Ewe",children:"Ewe"}),s.jsx(r,{value:"Nzema",children:"Nzema"}),s.jsx(r,{value:"Hausa",children:"Hausa"}),s.jsx(r,{value:"Gonja",children:"Gonja"}),s.jsx(r,{value:"Kwa",children:"Kwa"}),s.jsx(r,{value:"Dagbani",children:"Dagbani"}),s.jsx(r,{value:"Dagaare",children:"Dagaare"}),s.jsx(r,{value:"Kulango",children:"Kulango"}),s.jsx(r,{value:"Senufo",children:"Senufo"}),s.jsx(r,{value:"Mande",children:"Mande"}),s.jsx(r,{value:"Dangme",children:"Dangme"}),s.jsx(r,{value:"other",children:"Other"})]})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{select:!0,fullWidth:!0,label:"Other Tongue",name:"otherTongue",value:(l==null?void 0:l.otherTongue)||"",onChange:t,children:[s.jsx(r,{value:"English",children:"English"}),s.jsx(r,{value:"Spanish",children:"Spanish"}),s.jsx(r,{value:"Deutsch",children:"Deutsch"}),s.jsx(r,{value:"Italian",children:"Italian"}),s.jsx(r,{value:"Arabic",children:"Arabic"}),s.jsx(r,{value:"other",children:"Other"})]})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{select:!0,fullWidth:!0,label:"Complexion",name:"complexion",value:(l==null?void 0:l.complexion)||"",onChange:t,children:[s.jsx(r,{value:"Very Fair",children:"Very Fair"}),s.jsx(r,{value:"Fair",children:"Fair"}),s.jsx(r,{value:"Medium",children:"Medium"}),s.jsx(r,{value:"Olive",children:"Olive"}),s.jsx(r,{value:"Brown",children:"Brown"}),s.jsx(r,{value:"Black",children:"Black"})]})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Height",name:"height",value:(l==null?void 0:l.height)||"",onChange:t,slotProps:{input:{endAdornment:s.jsx(ze,{position:"end",children:"ft"})}}})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Weight",name:"weight",value:(l==null?void 0:l.weight)||"",onChange:t,slotProps:{input:{endAdornment:s.jsx(ze,{position:"end",children:"kg"})}}})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{fullWidth:!0,select:!0,label:"Region",name:"region",value:(l==null?void 0:l.region)||"",onChange:t,children:[s.jsx(r,{value:"Greater Accra",children:"Greater Accra"}),s.jsx(r,{value:"Ashanti",children:"Ashanti"}),s.jsx(r,{value:"Volta",children:"Volta"}),s.jsx(r,{value:"Central",children:"Central"}),s.jsx(r,{value:"Eastern",children:"Eastern"}),s.jsx(r,{value:"Western",children:"Western"}),s.jsx(r,{value:"Oti",children:"Oti"}),s.jsx(r,{value:"Bono",children:"Bono"}),s.jsx(r,{value:"Bono East",children:"Bono East"}),s.jsx(r,{value:"Ahafo",children:"Ahafo"}),s.jsx(r,{value:"Brong Ahafo",children:"Brong Ahafo"}),s.jsx(r,{value:"Northern",children:"Northern"}),s.jsx(r,{value:"Western North",children:"Western North"}),s.jsx(r,{value:"Upper West",children:"Upper West"}),s.jsx(r,{value:"Upper East",children:"Upper East"}),s.jsx(r,{value:"North East",children:"North East"})]})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"HomeTown",name:"homeTown",value:(l==null?void 0:l.homeTown)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"House Address",name:"residentialAddress",value:(l==null?void 0:l.residentialAddress)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"District",name:"district",value:(l==null?void 0:l.district)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Current City",name:"currentCity",value:(l==null?void 0:l.currentCity)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"GPS Address",name:"gpsAddress",value:(l==null?void 0:l.gpsAddress)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Email",name:"email",value:(l==null?void 0:l.email)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Mobile",name:"mobile",value:(l==null?void 0:l.mobile)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"JHS Attended",name:"jhsAttended",value:(l==null?void 0:l.jhsAttended)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"Year Graduated [ JHS ]",name:"completedJhs",value:(l==null?void 0:l.completedJhs)||"",onChange:t})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{fullWidth:!0,label:"JHS Index No.",name:"jhsIndexNo",value:(l==null?void 0:l.jhsIndexNo)||"",onChange:t,disabled:!0})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Select Programme",name:"program",value:(l==null?void 0:l.program)||"",onChange:t,children:g==null?void 0:g.map(a=>s.jsx(r,{value:a==null?void 0:a._id,children:a==null?void 0:a.name},a==null?void 0:a._id))})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Class Level",name:"currentClassLevel",value:(l==null?void 0:l.currentClassLevel)||"",onChange:t,children:W==null?void 0:W.map(a=>s.jsx(r,{value:a==null?void 0:a._id,children:a==null?void 0:a.name},a==null?void 0:a._id))})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Batch",name:"batch",value:(l==null?void 0:l.batch)||"",onChange:t,children:B==null?void 0:B.map(a=>s.jsx(r,{value:a==null?void 0:a._id,children:a==null?void 0:a.yearRange},a==null?void 0:a._id))})}),s.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:s.jsxs(h,{select:!0,fullWidth:!0,label:"Residential Status",name:"residentialStatus",value:(l==null?void 0:l.residentialStatus)||"",onChange:t,children:[s.jsx(r,{value:"Day",children:"Day"}),s.jsx(r,{value:"Boarding",children:"Boarding"}),s.jsx(r,{value:"Hostel",children:"Hostel"}),s.jsx(r,{value:"Private",children:"Private"}),s.jsx(r,{value:"Lecturers Bangalow",children:"Lecturers Bangalow"})]})}),s.jsx(i,{item:!0,xs:12,children:s.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx(i,{item:!0,xs:12,sm:4,children:s.jsxs(ke,{variant:"contained",component:"label",fullWidth:!0,sx:{textTransform:"capitalize",backgroundColor:"#292929",padding:"1rem"},children:["Change Image",s.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:$e})]})}),s.jsx(i,{item:!0,xs:12,sm:4,children:s.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:s.jsx(os,{src:E||(l==null?void 0:l.profilePicture),alt:"Profile Preview",sx:{width:"6rem",height:"6rem",borderRadius:".4rem",border:"1px solid #696969",padding:".2rem"}})})})]})}),s.jsx(i,{item:!0,xs:12,children:s.jsxs(ke,{variant:"contained",color:"success",type:"submit",fullWidth:!0,sx:{height:"3.5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1.2rem"},children:[A===!1&&s.jsx(ts,{color:"#fff",size:"1.5rem"}),A===!0&&d==="success"&&!F&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Successful"})," ",s.jsx(ms,{})]}),A===null&&"Save Changes",F&&s.jsx(hs,{color:"#fff",size:"1.5rem"})]})})]})})})})]})}export{Es as StudentDataUpdateForm};
