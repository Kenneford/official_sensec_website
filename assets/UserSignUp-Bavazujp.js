import{e as Y,a as Z,f as C,h as U,bF as ee,r as o,i as se,bG as te,n as R,bH as B,j as s,B as a,T as N,l as re,bI as oe}from"./index-BrKZIgIs.js";/* empty css               */import{c as h}from"./muiStyling-B8pUMTN3.js";import{R as ae}from"./Redirection-B8WeSLSt.js";import{L as ie}from"./LoadingProgress-DyOM2CxY.js";import{F as ne}from"./FetchProgrammeData-DzGaqZbQ.js";import{V as le,C as ce}from"./VpnKey-DiQV_VXv.js";import{G as p}from"./Grid-CMH8KWik.js";import{V as G,a as H}from"./VisibilityOff-CnPStAEu.js";import{F as ue}from"./FormControlLabel-CxBTaig9.js";import{P as me}from"./PersonAddAlt-BgMfkaeP.js";import{T as de}from"./TaskAlt-CZKWz0j9.js";import"./FormLabel-C2cHTcFw.js";import"./index-DcfIKM1A.js";import"./useControlled-BPddiEUe.js";import"./useThemeProps-DJrrucl-.js";import"./getThemeProps-VIUuhX1y.js";import"./index-CXwWd3ii.js";import"./IconButton-D70T8NKk.js";function Le(){var F,z,M,W;const i=Y(),g=Z(),n=C(U);ne(),C(ee);const{signUpStatus:c,successMessage:j,error:f}=C(t=>t==null?void 0:t.authUser),[y,K]=o.useState(!1),[q,$]=o.useState(!1),[b,I]=o.useState(null),[k,O]=o.useState(!1),[v,_]=o.useState(!1),[S,T]=o.useState(!1);o.useState(!1),o.useState(!1);const[u,A]=o.useState(!1),[m,E]=o.useState(!1),[d,L]=o.useState(!1),w=t=>{_(t.target.checked)},J=t=>{t.preventDefault(),K(r=>!r)},Q=t=>{t.preventDefault(),$(r=>!r)},[e,D]=o.useState({uniqueId:"",userName:"",password:"",confirmPassword:""});console.log(e);const l=n==null?void 0:n.find(t=>{var r;return(t==null?void 0:t.uniqueId)===(e==null?void 0:e.uniqueId)&&!((r=t==null?void 0:t.roles)!=null&&r.includes("student"))}),P=n==null?void 0:n.find(t=>{var r;return((r=t==null?void 0:t.userSignUpDetails)==null?void 0:r.userName)===(e==null?void 0:e.userName)}),x=t=>{D({...e,[t.target.name]:t.target.value})},X=t=>{var r;if(t.preventDefault(),e!=null&&e.userName&&P){A(!0);return}if(((r=e==null?void 0:e.password)==null?void 0:r.length)<6){E(!0);return}else if((e==null?void 0:e.confirmPassword)!==(e==null?void 0:e.password)){L(!0);return}else i(oe(e))};return o.useEffect(()=>{var t;if(e!=null&&e.uniqueId&&!l){T(!0);return}else T(!1);u&&((e==null?void 0:e.userName)===""||!P)&&A(!1),m&&((e==null?void 0:e.password)===""||((t=e==null?void 0:e.password)==null?void 0:t.length)>=6)&&E(!1),d&&((e==null?void 0:e.confirmPassword)===""||(e==null?void 0:e.confirmPassword)===(e==null?void 0:e.password))&&L(!1)},[e,l,u,P,m,d]),o.useEffect(()=>{i(se()),i(te())},[i]),o.useEffect(()=>{var t,r;if(c==="pending"&&I(!1),c==="rejected"){(r=(t=f==null?void 0:f.errorMessage)==null?void 0:t.message)==null||r.map(V=>{R.error(V,{position:"top-right",theme:"light",toastId:V})}),setTimeout(()=>{I(null),i(B())},3e3);return}c==="success"&&(R.success(j,{position:"top-center",theme:"dark",toastId:j}),setTimeout(()=>{D({uniqueId:"",programme:"",class:"",userName:"",password:"",confirmPassword:""})},2e3),setTimeout(()=>{I(!0)},3e3),setTimeout(()=>{O(!0)},5e3),setTimeout(()=>{g(`/sensec/users/sign_up/successful/${e==null?void 0:e.uniqueId}`),i(B())},7e3))},[c,f,j,g,i,e]),s.jsx(a,{sx:{width:{xs:"95%",sm:"36rem"}},margin:"auto",mt:5,mb:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"calc(.7rem + 1vmin)",children:s.jsxs(a,{color:"#696969",sx:{filter:"drop-shadow(0 0 0.3em rgb(255, 255, 255, 0.68))",boxShadow:"0px 1px 9px 1px #454343ad",borderRadius:".4rem",display:{xs:"block",sm:"flex"}},p:1,width:"100%",children:[s.jsx(a,{width:"15rem",sx:{display:{xs:"none",sm:"block"}},children:s.jsxs(a,{className:"left",children:[s.jsx("h1",{children:"Welcome, Cherished Partner."}),s.jsx("p",{children:"The Great Sensec is glad to have you here. Kindly fill all required fields to create a new account."})]})}),s.jsx(a,{component:"form",onSubmit:X,ml:{xs:0,sm:1},width:{xs:"100%",sm:"60%"},children:s.jsxs(a,{children:[s.jsxs(a,{mt:1,mb:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[s.jsx(le,{style:{color:"#767474",fontSize:"2rem"}}),s.jsx(N,{variant:"h5",component:"h1",mb:2,sx:{fontSize:"1.7rem"},children:"Partners Sign-Up"}),s.jsx(a,{className:"profilePictureWrap",children:s.jsx(a,{className:"profilePictureCont",children:s.jsx("img",{className:"profileImg",src:l?(z=(F=l==null?void 0:l.personalInfo)==null?void 0:F.profilePicture)==null?void 0:z.url:"/assets/noAvatar.png",alt:""})})})]}),s.jsxs(p,{container:!0,spacing:2,children:[s.jsx(p,{item:!0,xs:12,children:s.jsx(h,{fullWidth:!0,label:"Unique ID",name:"uniqueId",value:e==null?void 0:e.uniqueId,onChange:x,required:!0,error:S,helperText:S?"Invalid user-ID!":"",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.uniqueId&&!S?"green":"red"}}})}),s.jsx(p,{item:!0,xs:12,children:s.jsx(h,{fullWidth:!0,label:"Username",name:"userName",value:e==null?void 0:e.userName,onChange:x,required:!0,error:u,helperText:u?"Username already in use!":"",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.userName&&!u?"green":"red"}}})}),s.jsx(p,{item:!0,xs:12,children:s.jsx(h,{fullWidth:!0,label:"Password",name:"password",value:e==null?void 0:e.password,onChange:x,required:!0,type:y?"text":"password",slotProps:{input:{endAdornment:s.jsx(a,{component:"button",onClick:J,bgcolor:"transparent",children:y?s.jsx(G,{sx:{color:"#696969"}}):s.jsx(H,{sx:{color:"#696969"}})})}},error:m,helperText:m&&((M=e==null?void 0:e.password)==null?void 0:M.length)>0&&((W=e==null?void 0:e.password)==null?void 0:W.length)<6?"Password must be at least 6 characters long!":"",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.password&&!m?"green":"red"}}})}),s.jsx(p,{item:!0,xs:12,children:s.jsx(h,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",value:e==null?void 0:e.confirmPassword,onChange:x,required:!0,type:q?"text":"password",slotProps:{input:{endAdornment:s.jsx(a,{component:"button",onClick:Q,bgcolor:"transparent",children:q?s.jsx(G,{sx:{color:"#696969"}}):s.jsx(H,{sx:{color:"#696969"}})})}},error:d,helperText:d?"Confirm password must be same as password!":"",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.confirmPassword&&!d?"green":"red"}}})})]}),s.jsx(a,{children:s.jsx(ue,{control:s.jsx(ce,{checked:v,onChange:w,inputProps:{"aria-label":"controlled"},color:"success"}),label:"Accept terms and conditions",required:!0,sx:{"& .MuiFormControlLabel-asterisk":{color:`${v?"green":"red"}`}}})}),s.jsx(a,{mt:1,children:s.jsxs(N,{children:["Already have an account?"," ",s.jsx(N,{component:"span",onClick:()=>g("/sensec/login"),sx:{cursor:"pointer",color:"green"},children:"Login"})]})}),s.jsxs(re,{type:"submit",variant:"contained",fullWidth:!0,sx:{backgroundColor:"green",margin:"1rem 0",padding:".5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1em",minHeight:"3.7rem"},children:[b===!1&&s.jsx(ie,{color:"#fff",size:"1.3rem"}),b===null&&s.jsxs(s.Fragment,{children:["Sign Up"," ",s.jsx(me,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),b===!0&&c==="success"&&!k&&s.jsxs(s.Fragment,{children:["Success"," ",s.jsx(de,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),k&&s.jsx(ae,{color:"#fff",size:"1.3rem"})]})]})})]})})}export{Le as UserSignUp};
