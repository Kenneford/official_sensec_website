import{e as F,a as P,f as N,g as R,h as W,r as n,i as w,n as q,j as e,B as c,T as B,l as h,bL as H}from"./index-CL8aB76r.js";/* empty css               */import"./muiStyling-Biny6EY4.js";import{R as j}from"./Redirection-C_WW2eLG.js";import{L as S}from"./LoadingProgress-DrQz26HU.js";import{L as G,a as I}from"./LoginOutlined-DWceCV-C.js";import{G as d}from"./Grid-C0sdyGW0.js";import{T as L}from"./TaskAlt-S5e9RsjI.js";import"./FormLabel-DFf2C-vG.js";import"./index-DcfIKM1A.js";import"./useControlled-CyfcTk32.js";import"./useThemeProps-5fjUjDwy.js";import"./getThemeProps-BQ9MDSVY.js";import"./index-DvkxpYwK.js";import"./IconButton-zfBQ5iJg.js";function ae(){var A,T;const f=F(),u=P();localStorage.getItem("loginAction");const{loginStatus:o,successMessage:v,error:p}=N(t=>t==null?void 0:t.authUser),r=N(R),x=N(W);console.log(x);const[i,z]=n.useState(null),[a,D]=n.useState(!1);n.useState(!1);const[M,k]=n.useState(!1),[b,y]=n.useState(!1);console.log(b);const[s,$]=n.useState({uniqueId:"",userName:"",password:""});console.log(s);const m=x==null?void 0:x.find(t=>(t==null?void 0:t.uniqueId)===(s==null?void 0:s.uniqueId)),E=t=>{var l;t.preventDefault(),((l=s==null?void 0:s.password)==null?void 0:l.length)<6?y(!0):(console.log("Form submitted!"),f(H({uniqueId:s==null?void 0:s.uniqueId,password:s==null?void 0:s.password})))};n.useEffect(()=>{var t;if(s!=null&&s.uniqueId&&!m){k(!0);return}else k(!1);b&&((s==null?void 0:s.password)===""||((t=s==null?void 0:s.password)==null?void 0:t.length)>=6)&&y(!1)},[s,m,b]),n.useEffect(()=>{f(w())},[f]);const C=(()=>{var t,l,g,O;return(t=r==null?void 0:r.roles)!=null&&t.includes("admin")?"admin/Dashboard/Overview":(l=r==null?void 0:r.roles)!=null&&l.includes("lecturer")?"lecturer/Dashboard/Overview":(g=r==null?void 0:r.roles)!=null&&g.includes("student")?"student/Dashboard/Overview":(O=r==null?void 0:r.roles)!=null&&O.includes("nt-Staff")?"nt_staff/Dashboard/Overview":"*"})();return n.useEffect(()=>{var t,l;if(o==="pending"&&z(!1),o==="rejected"){(l=(t=p==null?void 0:p.errorMessage)==null?void 0:t.message)==null||l.map(g=>{q.error(g,{position:"top-right",theme:"light",toastId:g})}),setTimeout(()=>{z(null)},3e3);return}o==="success"&&(q.success(v,{position:"top-right",theme:"dark",toastId:v}),r?u(`/sensec/users/${r==null?void 0:r.uniqueId}/${C}`):setTimeout(()=>{D(!0)},3e3))},[o,p,v,u,f,m,r,C]),e.jsx(c,{sx:{width:{xs:"95%",sm:"36rem"}},margin:"auto",mt:5,mb:5,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"calc(.7rem + 1vmin)",height:"100%",children:e.jsxs(c,{component:"form",onSubmit:E,color:"#696969",sx:{filter:"drop-shadow(0 0 0.3em rgb(255, 255, 255, 0.68))",boxShadow:"0px 1px 9px 1px #454343ad",borderRadius:".4rem",display:{xs:"block",sm:"flex"}},p:1,width:"100%",children:[e.jsx(c,{width:"22rem",sx:{display:{xs:"none",sm:"block"}},children:e.jsxs(c,{className:"left",children:[e.jsx("h1",{children:"Welcome, Cherished User."}),e.jsx("p",{children:"Kindly select an option to proceed."})]})}),e.jsxs(c,{ml:{xs:0,sm:1},maxWidth:{xs:"100%",sm:"19rem"},children:[e.jsxs(c,{mt:2,mb:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(G,{style:{color:"#767474",fontSize:"2rem"}}),e.jsx(B,{variant:"h5",component:"h1",mb:2,sx:{fontSize:"1.7rem"},children:"Login"}),e.jsx(c,{className:"profilePictureWrap",children:e.jsx(c,{className:"profilePictureCont",children:e.jsx("img",{className:"profileImg",src:m?(T=(A=m==null?void 0:m.personalInfo)==null?void 0:A.profilePicture)==null?void 0:T.url:"/assets/noAvatar.png",alt:""})})})]}),e.jsxs(d,{container:!0,spacing:2,mb:2,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(h,{type:"submit",variant:"contained",fullWidth:!0,sx:{backgroundColor:"green",padding:".5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1em",minHeight:"3.7rem"},onClick:()=>{localStorage.setItem("loginAction","Admins Login"),localStorage.removeItem("currentOtherNavLink"),u("/sensec/login")},children:[i===!1&&e.jsx(S,{color:"#fff",size:"1.3rem"}),i===null&&e.jsxs(e.Fragment,{children:["Admins Login",e.jsx(I,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),i===!0&&o==="success"&&!a&&e.jsxs(e.Fragment,{children:["Success"," ",e.jsx(L,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),a&&e.jsx(j,{color:"#fff",size:"1.3rem"})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(h,{type:"submit",variant:"contained",fullWidth:!0,sx:{backgroundColor:"green",padding:".5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1em",minHeight:"3.7rem"},onClick:()=>{localStorage.setItem("loginAction","Lecturers Login"),localStorage.removeItem("currentOtherNavLink"),u("/sensec/login")},children:[i===!1&&e.jsx(S,{color:"#fff",size:"1.3rem"}),i===null&&e.jsxs(e.Fragment,{children:["Lecturers Login",e.jsx(I,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),i===!0&&o==="success"&&!a&&e.jsxs(e.Fragment,{children:["Success"," ",e.jsx(L,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),a&&e.jsx(j,{color:"#fff",size:"1.3rem"})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(h,{type:"submit",variant:"contained",fullWidth:!0,sx:{backgroundColor:"green",padding:".5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1em",minHeight:"3.7rem"},onClick:()=>{localStorage.setItem("loginAction","Students Login"),localStorage.removeItem("currentOtherNavLink"),u("/sensec/login")},children:[i===!1&&e.jsx(S,{color:"#fff",size:"1.3rem"}),i===null&&e.jsxs(e.Fragment,{children:["Students Login",e.jsx(I,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),i===!0&&o==="success"&&!a&&e.jsxs(e.Fragment,{children:["Success"," ",e.jsx(L,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),a&&e.jsx(j,{color:"#fff",size:"1.3rem"})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(h,{type:"submit",variant:"contained",fullWidth:!0,sx:{backgroundColor:"green",padding:".5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1em",minHeight:"3.7rem"},onClick:()=>{localStorage.setItem("loginAction","NT-Staffs Login"),localStorage.removeItem("currentOtherNavLink"),u("/sensec/login")},children:[i===!1&&e.jsx(S,{color:"#fff",size:"1.3rem"}),i===null&&e.jsxs(e.Fragment,{children:["NT-Staff Login",e.jsx(I,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),i===!0&&o==="success"&&!a&&e.jsxs(e.Fragment,{children:["Success"," ",e.jsx(L,{className:"signupIcon",sx:{marginLeft:".5rem"}})]}),a&&e.jsx(j,{color:"#fff",size:"1.3rem"})]})})]})]})]})})}export{ae as LoginOptions};
