import{e as De,f as S,h as He,r as x,i as qe,a as Ge,g as Re,u as _e,$ as Ke,a0 as Ve,a1 as Je,a2 as Qe,n as Xe,cK as Ze,j as t,B as T,T as Be,l as We,a4 as Le}from"./index-BrKZIgIs.js";/* empty css                       */import{C as Ae,c,I as Oe}from"./muiStyling-B8pUMTN3.js";import{F as ye}from"./FetchProgrammeData-DzGaqZbQ.js";import{F as we}from"./FetchBatch--i32YoZ5.js";import{L as Ee}from"./LoadingProgress-DyOM2CxY.js";import{R as es}from"./Redirection-B8WeSLSt.js";import{F as ss}from"./FetchClassSections-S2YYc8xi.js";import{G as i}from"./Grid-CMH8KWik.js";import{M as r}from"./MenuItem-BVBtbdIH.js";import{A as ts}from"./Avatar-C5bx0TLE.js";import{T as rs}from"./TaskAlt-CZKWz0j9.js";import"./FormLabel-C2cHTcFw.js";import"./index-DcfIKM1A.js";import"./useControlled-BPddiEUe.js";import"./useThemeProps-DJrrucl-.js";import"./getThemeProps-VIUuhX1y.js";import"./index-CXwWd3ii.js";import"./IconButton-D70T8NKk.js";const as=()=>{const n=De(),f=S(He);return x.useEffect(()=>{n(qe())},[n]),f},is=()=>{const n=as();return n==null?void 0:n.filter(g=>(g==null?void 0:g.employment)&&g)};function Os(){var z,H,q,G,R,_,K,V,J,Q,X,Z,L,A,y,w,E,ee,se,te,re,ae,ie,le,ce,he,oe;const n=De(),f=Ge(),g=S(Re),{studentIndexNo:ls,adminCurrentAction:j,adminCurrentLink:I}=_e();ye();const F=is(),P=ss();we(),S(Ke),S(Ve);const{enrollmentStatus:p,error:N,successMessage:Fe}=S(a=>a.student),U=new Date().getFullYear();(()=>{const a=new Date().getFullYear(),h=2024,u=new Date().getMonth()>=8?a:a-1,v=[];for(let d=h;d<=u;d++)v.push(`${d}/${d+1}`);return v})();const[B,m]=x.useState(null),[Y,Pe]=x.useState(""),[me,Me]=x.useState(""),ke=I,s=F==null?void 0:F.find(a=>(a==null?void 0:a.uniqueId)===ke),M=(z=s==null?void 0:s.personalInfo)!=null&&z.dateOfBirth?new Date((H=s==null?void 0:s.personalInfo)==null?void 0:H.dateOfBirth).toISOString():"",k=M==null?void 0:M.split("T")[0],[e,W]=x.useState({uniqueId:s==null?void 0:s.uniqueId,firstName:(q=s==null?void 0:s.personalInfo)==null?void 0:q.firstName,lastName:(G=s==null?void 0:s.personalInfo)==null?void 0:G.lastName,otherName:(R=s==null?void 0:s.personalInfo)==null?void 0:R.otherName,dateOfBirth:k,placeOfBirth:(_=s==null?void 0:s.personalInfo)==null?void 0:_.placeOfBirth,nationality:(K=s==null?void 0:s.personalInfo)==null?void 0:K.nationality,gender:(V=s==null?void 0:s.personalInfo)==null?void 0:V.gender,profilePicture:(Q=(J=s==null?void 0:s.personalInfo)==null?void 0:J.profilePicture)==null?void 0:Q.url,typeOfEmployment:(X=s==null?void 0:s.employment)==null?void 0:X.employmentType,classSection:(L=(Z=s==null?void 0:s.lecturerSchoolData)==null?void 0:Z.classLevelHandling)==null?void 0:L._id,height:(A=s==null?void 0:s.status)==null?void 0:A.height,weight:(y=s==null?void 0:s.status)==null?void 0:y.weight,complexion:(w=s==null?void 0:s.status)==null?void 0:w.complexion,motherTongue:(E=s==null?void 0:s.status)==null?void 0:E.motherTongue,otherTongue:(ee=s==null?void 0:s.status)==null?void 0:ee.otherTongue,residentialStatus:(se=s==null?void 0:s.status)==null?void 0:se.residentialStatus,homeTown:(te=s==null?void 0:s.contactAddress)==null?void 0:te.homeTown,district:(re=s==null?void 0:s.contactAddress)==null?void 0:re.district,region:(ae=s==null?void 0:s.contactAddress)==null?void 0:ae.region,currentCity:(ie=s==null?void 0:s.contactAddress)==null?void 0:ie.currentCity,residentialAddress:(le=s==null?void 0:s.contactAddress)==null?void 0:le.residentialAddress,gpsAddress:(ce=s==null?void 0:s.contactAddress)==null?void 0:ce.gpsAddress,mobile:(he=s==null?void 0:s.contactAddress)==null?void 0:he.mobile,email:(oe=s==null?void 0:s.contactAddress)==null?void 0:oe.email}),[$,Ue]=x.useState(null),Ye=a=>{const h=a.target.files[0],o=5*1024*1024;if(h.size>o){alert("File is too large! Please select a file smaller than 5MB.");return}a.target.files.length!==0&&W({...e,[a.target.name]:h});const u=new FileReader;u.readAsDataURL(a.target.files[0]),u.onloadend=()=>{Ue(u.result),W({...e,profilePicture:u.result})}},$e=(a,h,o)=>{var b,C;let u="";switch(a){case"Administration":u="ADM";break;case"Teaching Staff":u="LCT";break;case"Non-Teaching Staff":u="NTS";break;default:u="EMP"}const v=new Date().getFullYear(),d=h?(b=h==null?void 0:h.charAt(0))==null?void 0:b.toUpperCase():"",O=o?(C=o==null?void 0:o.charAt(0))==null?void 0:C.toUpperCase():"",D=Date.now().toString().slice(-5);return`${u}-${D}${d}${O}-${v}`},l=a=>{const{name:h,value:o}=a.target;W({...e,[h]:o})};x.useEffect(()=>{const a=$e(e==null?void 0:e.typeOfEmployment,e==null?void 0:e.firstName,e==null?void 0:e.lastName);Me(a)},[e]),x.useEffect(()=>{var a,h,o,u,v,d,O,D,b,C,ue,ne,ge,xe,de,je,ve,fe,pe,be,Ce,Te,Se,Ie,Ne;W({uniqueId:s==null?void 0:s.uniqueId,firstName:(a=s==null?void 0:s.personalInfo)==null?void 0:a.firstName,lastName:(h=s==null?void 0:s.personalInfo)==null?void 0:h.lastName,otherName:(o=s==null?void 0:s.personalInfo)==null?void 0:o.otherName,dateOfBirth:k,placeOfBirth:(u=s==null?void 0:s.personalInfo)==null?void 0:u.placeOfBirth,nationality:(v=s==null?void 0:s.personalInfo)==null?void 0:v.nationality,gender:(d=s==null?void 0:s.personalInfo)==null?void 0:d.gender,profilePicture:(D=(O=s==null?void 0:s.personalInfo)==null?void 0:O.profilePicture)==null?void 0:D.url,typeOfEmployment:(b=s==null?void 0:s.employment)==null?void 0:b.employmentType,classSection:(ue=(C=s==null?void 0:s.lecturerSchoolData)==null?void 0:C.classLevelHandling)==null?void 0:ue._id,height:(ne=s==null?void 0:s.status)==null?void 0:ne.height,weight:(ge=s==null?void 0:s.status)==null?void 0:ge.weight,complexion:(xe=s==null?void 0:s.status)==null?void 0:xe.complexion,motherTongue:(de=s==null?void 0:s.status)==null?void 0:de.motherTongue,otherTongue:(je=s==null?void 0:s.status)==null?void 0:je.otherTongue,residentialStatus:(ve=s==null?void 0:s.status)==null?void 0:ve.residentialStatus,homeTown:(fe=s==null?void 0:s.contactAddress)==null?void 0:fe.homeTown,district:(pe=s==null?void 0:s.contactAddress)==null?void 0:pe.district,region:(be=s==null?void 0:s.contactAddress)==null?void 0:be.region,currentCity:(Ce=s==null?void 0:s.contactAddress)==null?void 0:Ce.currentCity,residentialAddress:(Te=s==null?void 0:s.contactAddress)==null?void 0:Te.residentialAddress,gpsAddress:(Se=s==null?void 0:s.contactAddress)==null?void 0:Se.gpsAddress,mobile:(Ie=s==null?void 0:s.contactAddress)==null?void 0:Ie.mobile,email:(Ne=s==null?void 0:s.contactAddress)==null?void 0:Ne.email})},[s,k]);const ze=a=>{a.preventDefault();const h={uniqueId:me,firstName:e==null?void 0:e.firstName,lastName:e==null?void 0:e.lastName,otherName:e==null?void 0:e.otherName,dateOfBirth:e==null?void 0:e.dateOfBirth,placeOfBirth:e==null?void 0:e.placeOfBirth,nationality:e==null?void 0:e.nationality,gender:e==null?void 0:e.gender,profilePicture:e==null?void 0:e.profilePicture,typeOfEmployment:e==null?void 0:e.typeOfEmployment,height:e==null?void 0:e.height,weight:e==null?void 0:e.weight,complexion:e==null?void 0:e.complexion,motherTongue:e==null?void 0:e.motherTongue,otherTongue:e==null?void 0:e.otherTongue,residentialStatus:e==null?void 0:e.residentialStatus,homeTown:e==null?void 0:e.homeTown,district:e==null?void 0:e.district,region:e==null?void 0:e.region,currentCity:e==null?void 0:e.currentCity,residentialAddress:e==null?void 0:e.residentialAddress,gpsAddress:e==null?void 0:e.gpsAddress,mobile:e==null?void 0:e.mobile,email:e==null?void 0:e.email};n(Le(h)),console.log(h)};return x.useEffect(()=>{e!=null&&e.program&&n(Je({programId:e==null?void 0:e.program})),n(Qe())},[n,e]),x.useEffect(()=>{if(p==="pending"&&m(!1),p==="rejected"){setTimeout(()=>{var a,h;(h=(a=N==null?void 0:N.errorMessage)==null?void 0:a.message)==null||h.map(o=>Xe.error(o,{position:"top-right",theme:"light",toastId:o}))},2e3),setTimeout(()=>{m(null),n(Ze())},3e3);return}p==="success"&&(setTimeout(()=>{m(!0)},3e3),setTimeout(()=>{Pe(!0)},6e3),setTimeout(()=>{var a;(a=g==null?void 0:g.roles)!=null&&a.includes("admin")?f(`/sensec/users/${g==null?void 0:g.uniqueId}/admin/${j}/${I}/new_enrollment/parent/add`):f(`/sensec/students/enrollment/online/${e==null?void 0:e.uniqueId}/parent/add`)},9e3))},[f,n,p,N,Fe,B,e,j,I,g]),t.jsxs(t.Fragment,{children:[j&&I&&t.jsx(T,{component:"div",id:"adminDashboardHeaderWrap",sx:{position:"sticky",top:0,backgroundColor:"#fff",padding:0},minHeight:"4rem",children:t.jsxs("h1",{className:"dashAction",children:[j==null?void 0:j.replace(/_/g,"-")," / ",t.jsx("span",{children:"Update"})]})}),t.jsxs(Ae,{component:"div",id:"studentEnrollmentWrap",sx:{width:{xs:"100%",sm:"95%",md:"90%",lg:"90%",xl:"75%"},margin:"auto",p:{xs:"2rem .5rem",sm:"2rem"},display:"flex",flexDirection:"column",position:"relative"},children:[!j&&t.jsxs(T,{mb:2,children:[t.jsx(Be,{variant:"h4",fontSize:{xs:"1.4rem",sm:"1.7rem"},color:"#696969",textAlign:"center",letterSpacing:1,fontWeight:500,children:"New Employment"}),t.jsxs(Be,{variant:"h6",textAlign:"center",color:"#696969",fontSize:{xs:".9rem",sm:"1rem"},children:["("," ",t.jsxs("span",{style:{fontWeight:"500"},children:[U,"/",U+1]})," ","Academic Year )"]})]}),t.jsx(T,{component:"div",id:"enrollmentFormWrap",sx:{maxWidth:1e3,mx:"auto",p:{xs:".5rem .7rem",sm:3},border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:t.jsx("form",{onSubmit:ze,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem",padding:".5rem 0"},children:t.jsxs(i,{container:!0,spacing:3,children:[t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"First Name",name:"firstName",value:(e==null?void 0:e.firstName)||"",onChange:l,className:"textField",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.firstName?"green":"red"}}})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Surname",name:"lastName",value:(e==null?void 0:e.lastName)||"",onChange:l,sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.lastName?"green":"red"}}})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Other Name",name:"otherName",value:(e==null?void 0:e.otherName)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Place Of Birth",name:"placeOfBirth",value:(e==null?void 0:e.placeOfBirth)||"",onChange:l,sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.placeOfBirth?"green":"red"}}})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,name:"dateOfBirth",type:"date",value:(e==null?void 0:e.dateOfBirth)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Nationality",name:"nationality",value:(e==null?void 0:e.nationality)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Gender",name:"gender",value:(e==null?void 0:e.gender)||"",onChange:l,children:[t.jsx(r,{value:"Male",children:"Male"}),t.jsx(r,{value:"Female",children:"Female"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Mother Tongue",name:"motherTongue",value:(e==null?void 0:e.motherTongue)||"",onChange:l,children:[t.jsx(r,{value:"Twi",children:"Twi"}),t.jsx(r,{value:"Fante",children:"Fante"}),t.jsx(r,{value:"Ga",children:"Ga"}),t.jsx(r,{value:"Ewe",children:"Ewe"}),t.jsx(r,{value:"Nzema",children:"Nzema"}),t.jsx(r,{value:"Hausa",children:"Hausa"}),t.jsx(r,{value:"Gonja",children:"Gonja"}),t.jsx(r,{value:"Kwa",children:"Kwa"}),t.jsx(r,{value:"Dagbani",children:"Dagbani"}),t.jsx(r,{value:"Dagaare",children:"Dagaare"}),t.jsx(r,{value:"Kulango",children:"Kulango"}),t.jsx(r,{value:"Senufo",children:"Senufo"}),t.jsx(r,{value:"Mande",children:"Mande"}),t.jsx(r,{value:"Dangme",children:"Dangme"}),t.jsx(r,{value:"other",children:"Other"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Other Tongue",name:"otherTongue",value:(e==null?void 0:e.otherTongue)||"",onChange:l,children:[t.jsx(r,{value:"English",children:"English"}),t.jsx(r,{value:"French",children:"French"}),t.jsx(r,{value:"Spanish",children:"Spanish"}),t.jsx(r,{value:"Deutsch",children:"Deutsch"}),t.jsx(r,{value:"Italian",children:"Italian"}),t.jsx(r,{value:"Arabic",children:"Arabic"}),t.jsx(r,{value:"other",children:"Other"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Complexion",name:"complexion",value:(e==null?void 0:e.complexion)||"",onChange:l,children:[t.jsx(r,{value:"Very Fair",children:"Very Fair"}),t.jsx(r,{value:"Fair",children:"Fair"}),t.jsx(r,{value:"Medium",children:"Medium"}),t.jsx(r,{value:"Olive",children:"Olive"}),t.jsx(r,{value:"Brown",children:"Brown"}),t.jsx(r,{value:"Black",children:"Black"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Height",name:"height",value:(e==null?void 0:e.height)||"",onChange:l,slotProps:{input:{endAdornment:t.jsx(Oe,{position:"end",children:"ft"})}}})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Weight",name:"weight",value:(e==null?void 0:e.weight)||"",onChange:l,slotProps:{input:{endAdornment:t.jsx(Oe,{position:"end",children:"kg"})}}})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{fullWidth:!0,select:!0,label:"Region",name:"region",value:(e==null?void 0:e.region)||"",onChange:l,children:[t.jsx(r,{value:"Greater Accra",children:"Greater Accra"}),t.jsx(r,{value:"Ashanti",children:"Ashanti"}),t.jsx(r,{value:"Volta",children:"Volta"}),t.jsx(r,{value:"Central",children:"Central"}),t.jsx(r,{value:"Eastern",children:"Eastern"}),t.jsx(r,{value:"Western",children:"Western"}),t.jsx(r,{value:"Oti",children:"Oti"}),t.jsx(r,{value:"Bono",children:"Bono"}),t.jsx(r,{value:"Bono East",children:"Bono East"}),t.jsx(r,{value:"Ahafo",children:"Ahafo"}),t.jsx(r,{value:"Brong Ahafo",children:"Brong Ahafo"}),t.jsx(r,{value:"Northern",children:"Northern"}),t.jsx(r,{value:"Western North",children:"Western North"}),t.jsx(r,{value:"Upper West",children:"Upper West"}),t.jsx(r,{value:"Upper East",children:"Upper East"}),t.jsx(r,{value:"North East",children:"North East"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"HomeTown",name:"homeTown",value:(e==null?void 0:e.homeTown)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"District",name:"district",value:(e==null?void 0:e.district)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Current City",name:"currentCity",value:(e==null?void 0:e.currentCity)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"House Address",name:"residentialAddress",value:(e==null?void 0:e.residentialAddress)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"GPS Address",name:"gpsAddress",value:(e==null?void 0:e.gpsAddress)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Email",name:"email",value:(e==null?void 0:e.email)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{fullWidth:!0,label:"Mobile",name:"mobile",value:(e==null?void 0:e.mobile)||"",onChange:l})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Employment Type",name:"typeOfEmployment",value:(e==null?void 0:e.typeOfEmployment)||"",onChange:l,children:[t.jsx(r,{value:"Administration",children:"Administration"}),t.jsx(r,{value:"Teaching Staff",children:"Teaching Staff"}),t.jsx(r,{value:"Non-Teaching Staff",children:"Non-Teaching Staff"})]})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsx(c,{select:!0,fullWidth:!0,label:"Assign Class",name:"classSection",value:(e==null?void 0:e.classSection)||"",onChange:l,children:P==null?void 0:P.map(a=>t.jsxs(r,{value:a==null?void 0:a._id,children:[a==null?void 0:a.label," - ",a==null?void 0:a.sectionName]},a==null?void 0:a._id))})}),t.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:t.jsxs(c,{select:!0,fullWidth:!0,label:"Residential Status",name:"residentialStatus",value:(e==null?void 0:e.residentialStatus)||"",onChange:l,children:[t.jsx(r,{value:"Day",children:"Day"}),t.jsx(r,{value:"Boarding",children:"Boarding"}),t.jsx(r,{value:"Hostel",children:"Hostel"}),t.jsx(r,{value:"Private",children:"Private"}),t.jsx(r,{value:"Lecturers Bangalow",children:"Lecturers Bangalow"})]})}),t.jsx(i,{item:!0,xs:12,children:t.jsxs(T,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsxs(We,{variant:"contained",component:"label",fullWidth:!0,sx:{textTransform:"capitalize",backgroundColor:"#292929",padding:"1rem"},children:["Upload Image",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:Ye})]})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(T,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:t.jsx(ts,{src:$||(e==null?void 0:e.profilePicture),alt:"Profile Preview",sx:{width:"6rem",height:"6rem",borderRadius:".4rem",border:"1px solid #696969",padding:".2rem"}})})})]})}),t.jsx(i,{item:!0,xs:12,children:t.jsxs(We,{variant:"contained",color:"success",type:"submit",fullWidth:!0,sx:{height:"3.5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1.2rem"},children:[B===!1&&t.jsx(Ee,{color:"#fff",size:"1.5rem"}),B===!0&&p==="success"&&!Y&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"Successful"})," ",t.jsx(rs,{})]}),B===null&&"Save Changes",Y&&t.jsx(es,{color:"#fff",size:"1.5rem"})]})})]})})})]})]})}export{Os as EmployeeDataUpdateForm};
