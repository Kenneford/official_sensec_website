import{e as q,a as w,f as A,g as z,u as E,r as u,n as N,cL as M,j as e,B as x,T as _,l as U,cM as G}from"./index-BgAz6R-J.js";/* empty css                       */import{C as $,c as H}from"./muiStyling-DmAU0UFM.js";import{L as J}from"./LoadingProgress-C8hgd9jP.js";import{R as K}from"./Redirection-ChYyGRqW.js";import{F as O}from"./FetchClassSections-CITl_X_J.js";import{F as Q}from"./FetchLecturers-g06Qmz1E.js";import{G as l}from"./Grid-LFq3_oT1.js";import{A as V}from"./Avatar-CpK3xMHY.js";import{M as X}from"./MenuItem-C5ks1D81.js";import{T as Y}from"./TaskAlt-bfh00-md.js";import"./FormLabel-C_YAtYcn.js";import"./index-DcfIKM1A.js";import"./useControlled-BV50I6TR.js";import"./useThemeProps-JU6LSmm0.js";import"./getThemeProps-IXaZHU6q.js";import"./index-CUAsLGHl.js";import"./IconButton-DXnj9XZJ.js";function ge(){var y,C,b,T,F;const B=localStorage.getItem("lecturerId"),m=q(),j=w(),r=A(z),{adminCurrentAction:n,adminCurrentLink:S}=E(),g=Q(),f=O(),{assignLecturerStatus:a,error:c,successMessage:D}=A(s=>s.classSection),[d,h]=u.useState(null),[I,R]=u.useState(""),t=g==null?void 0:g.find(s=>(s==null?void 0:s.uniqueId)===B),[i,k]=u.useState({classSection:""}),P=s=>{const{name:o,value:p}=s.target;k({...i,[o]:p})},W=s=>{s.preventDefault();const o={lecturerId:t==null?void 0:t.uniqueId,classSectionId:i==null?void 0:i.classSection,lecturerAssignedBy:r==null?void 0:r.id};m(G({data:o})),console.log(o)};return u.useEffect(()=>{if(a==="pending"&&h(!1),a==="rejected"){setTimeout(()=>{var s,o;(o=(s=c==null?void 0:c.errorMessage)==null?void 0:s.message)==null||o.map(p=>N.error(p,{position:"top-right",theme:"light",toastId:p}))},2e3),setTimeout(()=>{h(null),m(M())},3e3);return}a==="success"&&(setTimeout(()=>{h(!0)},3e3),setTimeout(()=>{R(!0)},6e3),setTimeout(()=>{localStorage.removeItem("lecturerId"),m(M()),j(`/sensec/users/${r==null?void 0:r.uniqueId}/admin/User_Types/Lecturers/employees/All`)},9e3))},[j,m,a,c,D,d,n,S,r]),e.jsxs(e.Fragment,{children:[n&&S&&e.jsx(x,{component:"div",id:"adminDashboardHeaderWrap",sx:{position:"sticky",top:0,backgroundColor:"#fff",padding:0},minHeight:"4rem",children:e.jsxs("h1",{className:"dashAction",children:[n==null?void 0:n.replace(/_/g,"-")," /"," ",e.jsx("span",{children:"Assign Class Lecturer"})]})}),e.jsx($,{component:"div",id:"studentEnrollmentWrap",sx:{width:{xs:"100%",sm:"95%",md:"90%",lg:"90%",xl:"75%"},margin:"auto",p:{xs:"2rem .5rem",sm:"2rem"},display:"flex",flexDirection:"column",position:"relative"},children:e.jsx(x,{component:"div",id:"enrollmentFormWrap",sx:{width:{xs:"100%",sm:"90%",md:"70%",lg:"45%"},mx:"auto",p:{xs:".5rem .7rem",sm:3},border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:e.jsx("form",{onSubmit:W,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem",padding:".5rem 0"},children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(x,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsxs(x,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",children:[e.jsx(V,{src:(C=(y=t==null?void 0:t.personalInfo)==null?void 0:y.profilePicture)==null?void 0:C.url,alt:"Profile Preview",sx:{width:"6rem",height:"6rem",borderRadius:".4rem",border:"1px solid #696969",padding:".2rem"}}),e.jsxs(_,{sx:{color:"#696969",mt:1},children:[t&&((b=t==null?void 0:t.personalInfo)==null?void 0:b.gender)==="Male"&&"Mr."," ",t&&((T=t==null?void 0:t.personalInfo)==null?void 0:T.gender)==="Female"&&"Mrs."," ",t?(F=t==null?void 0:t.personalInfo)==null?void 0:F.fullName:""]})]})})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(H,{select:!0,fullWidth:!0,label:"Select Section",name:"classSection",value:i==null?void 0:i.classSection,onChange:P,required:!0,children:f==null?void 0:f.map(s=>e.jsxs(X,{value:s==null?void 0:s._id,children:[s==null?void 0:s.label," - ",s==null?void 0:s.sectionName]},s==null?void 0:s._id))})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(U,{variant:"contained",color:"success",type:"submit",fullWidth:!0,sx:{height:"3.5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1.2rem"},children:[d===!1&&e.jsx(J,{color:"#fff",size:"1.5rem"}),d===!0&&a==="success"&&!I&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Successful"})," ",e.jsx(Y,{})]}),d===null&&"Assign Class",I&&e.jsx(K,{color:"#fff",size:"1.5rem"})]})})]})})})})]})}export{ge as AssignLectureClassForm};
