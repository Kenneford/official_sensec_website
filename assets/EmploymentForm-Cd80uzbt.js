import{e as $,a as R,f as S,g as K,u as V,$ as _,a0 as J,r as c,a1 as Q,a2 as X,n as Z,a3 as F,j as r,B as v,T as I,l as P,a4 as y}from"./index-CL8aB76r.js";import{C as w,c as s,L as E,d as ee,I as q}from"./muiStyling-Biny6EY4.js";import{F as re}from"./FetchProgrammeData-Dhiaheji.js";import{F as te}from"./FetchBatch-CdHBPORD.js";import{L as ae}from"./LoadingProgress-DrQz26HU.js";import{G as i}from"./Grid-C0sdyGW0.js";import{A as ie}from"./AdapterDateFns-CtiyayOw.js";import{M as t}from"./MenuItem-Ci3WSCxq.js";import{A as se}from"./Avatar-BKQq1lUL.js";import{T as le}from"./TaskAlt-S5e9RsjI.js";import"./FormLabel-DFf2C-vG.js";import"./index-DcfIKM1A.js";import"./useControlled-CyfcTk32.js";import"./useThemeProps-5fjUjDwy.js";import"./getThemeProps-BQ9MDSVY.js";import"./index-DvkxpYwK.js";import"./IconButton-zfBQ5iJg.js";import"./index-Co61iN_c.js";function Ne(){const h=$();R(),S(K);const{studentIndexNo:M,adminCurrentAction:g,adminCurrentLink:m}=V(),T=re();te(),S(_),S(J);const{employmentStatus:f,error:b,successMessage:de}=S(a=>a.employment),W=new Date().getFullYear();(()=>{const a=new Date().getFullYear(),d=2024,n=new Date().getMonth()>=8?a:a-1,C=[];for(let x=d;x<=n;x++)C.push(`${x}/${x+1}`);return C})();const[p,A]=c.useState(null);c.useState("");const[o,k]=c.useState(""),[e,j]=c.useState({uniqueId:o||"",firstName:"",lastName:"",otherName:"",dateOfBirth:"",placeOfBirth:"",nationality:"",gender:"",profilePicture:"",jhsAttended:"",completedJhs:"",jhsIndexNo:M,program:"",divisionProgram:"",optionalElectiveSubject:"",typeOfEmployment:"",currentAcademicYear:"",batch:"",height:"",weight:"",complexion:"",motherTongue:"",otherTongue:"",residentialStatus:"",homeTown:"",district:"",region:"",currentCity:"",residentialAddress:"",gpsAddress:"",mobile:"",email:""}),[B,N]=c.useState(null),Y=a=>{const d=a.target.files[0],u=5*1024*1024;if(d.size>u){alert("File is too large! Please select a file smaller than 5MB.");return}a.target.files.length!==0&&j({...e,[a.target.name]:d});const n=new FileReader;n.readAsDataURL(a.target.files[0]),n.onloadend=()=>{N(n.result),j({...e,profilePicture:n.result})}},U=(a,d,u)=>{var D,O;let n="";switch(a){case"Administration":n="ADM";break;case"Teaching Staff":n="LCT";break;case"Non-Teaching Staff":n="NTS";break;default:n="EMP"}const C=new Date().getFullYear(),x=d?(D=d==null?void 0:d.charAt(0))==null?void 0:D.toUpperCase():"",G=u?(O=u==null?void 0:u.charAt(0))==null?void 0:O.toUpperCase():"",H=Date.now().toString().slice(-5);return`${n}-${H}${x}${G}-${C}`};c.useEffect(()=>{const a=U(e==null?void 0:e.typeOfEmployment,e==null?void 0:e.firstName,e==null?void 0:e.lastName);k(a)},[e]);const z=(a,d)=>{j(u=>({...u,[a]:d}))},l=a=>{const{name:d,value:u}=a.target;j({...e,[d]:u})},L=a=>{a.preventDefault();const d={uniqueId:o,firstName:e==null?void 0:e.firstName,lastName:e==null?void 0:e.lastName,otherName:e==null?void 0:e.otherName,dateOfBirth:e==null?void 0:e.dateOfBirth,placeOfBirth:e==null?void 0:e.placeOfBirth,nationality:e==null?void 0:e.nationality,gender:e==null?void 0:e.gender,profilePicture:e==null?void 0:e.profilePicture,program:e==null?void 0:e.program,typeOfEmployment:e==null?void 0:e.typeOfEmployment,height:e==null?void 0:e.height,weight:e==null?void 0:e.weight,complexion:e==null?void 0:e.complexion,motherTongue:e==null?void 0:e.motherTongue,otherTongue:e==null?void 0:e.otherTongue,residentialStatus:e==null?void 0:e.residentialStatus,homeTown:e==null?void 0:e.homeTown,district:e==null?void 0:e.district,region:e==null?void 0:e.region,currentCity:e==null?void 0:e.currentCity,residentialAddress:e==null?void 0:e.residentialAddress,gpsAddress:e==null?void 0:e.gpsAddress,mobile:e==null?void 0:e.mobile,email:e==null?void 0:e.email};h(y(d)),console.log(d)};return c.useEffect(()=>{e!=null&&e.program&&h(Q({programId:e==null?void 0:e.program})),h(X())},[h,e]),c.useEffect(()=>{if(f==="pending"&&A(!1),f==="rejected"){setTimeout(()=>{var a,d;(d=(a=b==null?void 0:b.errorMessage)==null?void 0:a.message)==null||d.map(u=>Z.error(u,{position:"top-right",theme:"light",toastId:u}))},2e3),setTimeout(()=>{A(null),h(F())},3e3);return}f==="success"&&(setTimeout(()=>{A(!0)},3e3),setTimeout(()=>{A(null),h(F()),j({uniqueId:o||"",firstName:"",lastName:"",otherName:"",dateOfBirth:"",placeOfBirth:"",nationality:"",gender:"",profilePicture:"",program:"",typeOfEmployment:"",height:"",weight:"",complexion:"",motherTongue:"",otherTongue:"",residentialStatus:"",homeTown:"",district:"",region:"",currentCity:"",residentialAddress:"",gpsAddress:"",mobile:"",email:""}),N(null)},6e3))},[h,f,b,o]),r.jsxs(r.Fragment,{children:[g&&m&&r.jsx(v,{component:"div",id:"adminDashboardHeaderWrap",sx:{position:"sticky",top:0,backgroundColor:"#fff",padding:0},minHeight:"4rem",children:r.jsxs("h1",{className:"dashAction",children:[g==null?void 0:g.replace(/_/g,"-")," /"," ",r.jsx("span",{children:m==null?void 0:m.replace(/_/g," ")})]})}),r.jsxs(w,{component:"div",id:"studentEnrollmentWrap",sx:{width:{xs:"100%",sm:"95%",md:"90%",lg:"90%",xl:"75%"},margin:"auto",p:{xs:"2rem .5rem",sm:"2rem"},display:"flex",flexDirection:"column",position:"relative"},children:[!g&&r.jsxs(v,{mb:2,children:[r.jsx(I,{variant:"h4",fontSize:{xs:"1.4rem",sm:"1.7rem"},color:"#696969",textAlign:"center",letterSpacing:1,fontWeight:500,children:"New Employment"}),r.jsxs(I,{variant:"h6",textAlign:"center",color:"#696969",fontSize:{xs:".9rem",sm:"1rem"},children:["("," ",r.jsxs("span",{style:{fontWeight:"500"},children:[W,"/",W+1]})," ","Academic Year )"]})]}),r.jsx(v,{component:"div",id:"enrollmentFormWrap",sx:{maxWidth:1e3,mx:"auto",p:{xs:".5rem .7rem",sm:3},border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:r.jsx("form",{onSubmit:L,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem",padding:".5rem 0"},children:r.jsxs(i,{container:!0,spacing:3,children:[r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"First Name",name:"firstName",value:e==null?void 0:e.firstName,onChange:l,required:!0,className:"textField",sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.firstName?"green":"red"}}})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Surname",name:"lastName",value:e==null?void 0:e.lastName,onChange:l,required:!0,sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.lastName?"green":"red"}}})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Other Name",name:"otherName",value:e==null?void 0:e.otherName,onChange:l})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Place Of Birth",name:"placeOfBirth",value:e==null?void 0:e.placeOfBirth,onChange:l,required:!0,sx:{"& .MuiInputLabel-asterisk":{color:e!=null&&e.placeOfBirth?"green":"red"}}})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(E,{dateAdapter:ie,children:r.jsx(ee,{label:"Date of Birth",value:(e==null?void 0:e.dateOfBirth)||"",onChange:a=>z("dateOfBirth",a),renderInput:a=>r.jsx(s,{...a}),sx:{width:"100%"}})})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Nationality",name:"nationality",value:e==null?void 0:e.nationality,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Gender",name:"gender",value:e==null?void 0:e.gender,onChange:l,required:!0,children:[r.jsx(t,{value:"Male",children:"Male"}),r.jsx(t,{value:"Female",children:"Female"})]})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Mother Tongue",name:"motherTongue",value:e==null?void 0:e.motherTongue,onChange:l,required:!0,children:[r.jsx(t,{value:"Twi",children:"Twi"}),r.jsx(t,{value:"Fante",children:"Fante"}),r.jsx(t,{value:"Ga",children:"Ga"}),r.jsx(t,{value:"Ewe",children:"Ewe"}),r.jsx(t,{value:"Nzema",children:"Nzema"}),r.jsx(t,{value:"Hausa",children:"Hausa"}),r.jsx(t,{value:"Gonja",children:"Gonja"}),r.jsx(t,{value:"Kwa",children:"Kwa"}),r.jsx(t,{value:"Dagbani",children:"Dagbani"}),r.jsx(t,{value:"Dagaare",children:"Dagaare"}),r.jsx(t,{value:"Kulango",children:"Kulango"}),r.jsx(t,{value:"Senufo",children:"Senufo"}),r.jsx(t,{value:"Mande",children:"Mande"}),r.jsx(t,{value:"Dangme",children:"Dangme"}),r.jsx(t,{value:"other",children:"Other"})]})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Other Tongue",name:"otherTongue",value:e==null?void 0:e.otherTongue,onChange:l,children:[r.jsx(t,{value:"English",children:"English"}),r.jsx(t,{value:"French",children:"French"}),r.jsx(t,{value:"Spanish",children:"Spanish"}),r.jsx(t,{value:"Deutsch",children:"Deutsch"}),r.jsx(t,{value:"Italian",children:"Italian"}),r.jsx(t,{value:"Arabic",children:"Arabic"}),r.jsx(t,{value:"other",children:"Other"})]})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Complexion",name:"complexion",value:e==null?void 0:e.complexion,onChange:l,required:!0,children:[r.jsx(t,{value:"Very Fair",children:"Very Fair"}),r.jsx(t,{value:"Fair",children:"Fair"}),r.jsx(t,{value:"Medium",children:"Medium"}),r.jsx(t,{value:"Olive",children:"Olive"}),r.jsx(t,{value:"Brown",children:"Brown"}),r.jsx(t,{value:"Black",children:"Black"})]})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Height",name:"height",value:e==null?void 0:e.height,onChange:l,required:!0,slotProps:{input:{endAdornment:r.jsx(q,{position:"end",children:"ft"})}}})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Weight",name:"weight",value:e==null?void 0:e.weight,onChange:l,required:!0,slotProps:{input:{endAdornment:r.jsx(q,{position:"end",children:"kg"})}}})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{fullWidth:!0,select:!0,label:"Region",name:"region",value:e==null?void 0:e.region,onChange:l,required:!0,children:[r.jsx(t,{value:"Greater Accra",children:"Greater Accra"}),r.jsx(t,{value:"Ashanti",children:"Ashanti"}),r.jsx(t,{value:"Volta",children:"Volta"}),r.jsx(t,{value:"Central",children:"Central"}),r.jsx(t,{value:"Eastern",children:"Eastern"}),r.jsx(t,{value:"Western",children:"Western"}),r.jsx(t,{value:"Oti",children:"Oti"}),r.jsx(t,{value:"Bono",children:"Bono"}),r.jsx(t,{value:"Bono East",children:"Bono East"}),r.jsx(t,{value:"Ahafo",children:"Ahafo"}),r.jsx(t,{value:"Brong Ahafo",children:"Brong Ahafo"}),r.jsx(t,{value:"Northern",children:"Northern"}),r.jsx(t,{value:"Western North",children:"Western North"}),r.jsx(t,{value:"Upper West",children:"Upper West"}),r.jsx(t,{value:"Upper East",children:"Upper East"}),r.jsx(t,{value:"North East",children:"North East"})]})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"HomeTown",name:"homeTown",value:e==null?void 0:e.homeTown,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"District",name:"district",value:e==null?void 0:e.district,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Current City",name:"currentCity",value:e==null?void 0:e.currentCity,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"House Address",name:"residentialAddress",value:e==null?void 0:e.residentialAddress,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"GPS Address",name:"gpsAddress",value:e==null?void 0:e.gpsAddress,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Email",name:"email",value:e==null?void 0:e.email,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{fullWidth:!0,label:"Mobile",name:"mobile",value:e==null?void 0:e.mobile,onChange:l,required:!0})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Employment Type",name:"typeOfEmployment",value:e==null?void 0:e.typeOfEmployment,onChange:l,required:!0,children:[r.jsx(t,{value:"Administration",children:"Administration"}),r.jsx(t,{value:"Teaching Staff",children:"Teaching Staff"}),r.jsx(t,{value:"Non-Teaching Staff",children:"Non-Teaching Staff"})]})}),(e==null?void 0:e.typeOfEmployment)==="Teaching Staff"&&r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsx(s,{select:!0,fullWidth:!0,label:"Select Programme",name:"program",value:e==null?void 0:e.program,onChange:l,required:!0,children:T==null?void 0:T.map(a=>r.jsx(t,{value:a==null?void 0:a._id,children:a==null?void 0:a.name},a==null?void 0:a._id))})}),r.jsx(i,{item:!0,xs:12,sm:6,md:4,lg:4,children:r.jsxs(s,{select:!0,fullWidth:!0,label:"Residential Status",name:"residentialStatus",value:e==null?void 0:e.residentialStatus,onChange:l,required:!0,children:[r.jsx(t,{value:"Day",children:"Day"}),r.jsx(t,{value:"Boarding",children:"Boarding"}),r.jsx(t,{value:"Hostel",children:"Hostel"}),r.jsx(t,{value:"Private",children:"Private"}),r.jsx(t,{value:"Lecturers Bangalow",children:"Lecturers Bangalow"})]})}),r.jsx(i,{item:!0,xs:12,children:r.jsxs(v,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[r.jsx(i,{item:!0,xs:12,sm:4,children:r.jsxs(P,{variant:"contained",component:"label",fullWidth:!0,sx:{textTransform:"capitalize",backgroundColor:"#292929",padding:"1rem"},children:["Upload Image",r.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:Y})]})}),r.jsx(i,{item:!0,xs:12,sm:4,children:B&&r.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:r.jsx(se,{src:B,alt:"Profile Preview",sx:{width:"6rem",height:"6rem",borderRadius:".4rem",border:"1px solid #696969",padding:".2rem"}})})})]})}),r.jsx(i,{item:!0,xs:12,children:r.jsxs(P,{variant:"contained",color:"success",type:"submit",fullWidth:!0,sx:{height:"3.5rem",letterSpacing:"1px",textTransform:"capitalize",fontSize:"1.2rem"},children:[p===!1&&r.jsx(ae,{color:"#fff",size:"1.5rem"}),p===!0&&f==="success"&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"Successful"})," ",r.jsx(le,{})]}),p===null&&"Submit Employment Data"]})})]})})})]})]})}export{Ne as EmploymentForm};
