import{f,g as P,$ as y,e as M,r as m,n as C,ch as N,a1 as W,j as e,B as j,l as L,cj as R}from"./index-BgAz6R-J.js";/* empty css               */import{c as g}from"./muiStyling-DmAU0UFM.js";import{F as k}from"./FetchProgrammeData-DNSy9I4u.js";import{L as A}from"./LoadingProgress-C8hgd9jP.js";import{G as n}from"./Grid-LFq3_oT1.js";import{M as E}from"./MenuItem-C5ks1D81.js";import{c as D,a as _}from"./FormLabel-C_YAtYcn.js";import{R as v,a as F}from"./RadioGroup-BaHrOD2P.js";import{F as T}from"./FormControlLabel-DHQ49enT.js";import{T as G}from"./TaskAlt-bfh00-md.js";import"./index-DcfIKM1A.js";import"./useControlled-BV50I6TR.js";import"./useThemeProps-JU6LSmm0.js";import"./getThemeProps-IXaZHU6q.js";import"./index-CUAsLGHl.js";import"./IconButton-DXnj9XZJ.js";function os(){const a=f(P),h=k(),o=f(y),i=M(),[x,l]=m.useState(null),{createStatus:r,successMessage:p,error:d}=f(t=>t.subject),[s,I]=m.useState({subjectName:"",programId:"",divisionProgramId:"",isOptional:"",createdBy:`${a.id}`}),c=t=>{I({...s,[t.target.name]:t.target.value})},B=!!s.subjectName&&!!(s!=null&&s.programId),O=t=>{t.preventDefault();const u={subjectName:s==null?void 0:s.subjectName,isCore:!1,programId:s==null?void 0:s.programId,divisionProgramId:s==null?void 0:s.divisionProgramId,isOptional:s==null?void 0:s.isOptional,createdBy:a==null?void 0:a.id};i(R({data:u}))};return m.useEffect(()=>{if(r==="pending"&&l(!1),r==="rejected"){setTimeout(()=>{var t,u;(u=(t=d==null?void 0:d.errorMessage)==null?void 0:t.message)==null||u.map(b=>C.error(b,{position:"top-right",theme:"light",toastId:"createSubjectError"}))},2e3),setTimeout(()=>{l(null),i(N())},3e3);return}r==="success"&&(setTimeout(()=>{l(!0)},3e3),setTimeout(()=>{C.success(p,{position:"top-right",theme:"dark",toastId:p})},1e3),setTimeout(()=>{I({subjectName:"",programId:"",divisionProgramId:"",isOptional:"",createdBy:`${a.id}`}),i(N()),l(null)},6e3))},[d,p,r,a,i]),m.useEffect(()=>{s!=null&&s.programId&&i(W({programId:s==null?void 0:s.programId}))},[i,s==null?void 0:s.programId]),e.jsx("div",{className:"electiveSubjectWrap",children:e.jsx(j,{sx:{width:{xs:"100%",sm:"85%",md:"75%",lg:"60%",xl:"50%"},margin:"auto",paddingTop:"2rem",display:"flex",flexDirection:"column"},className:"createDataWrap",children:e.jsxs(j,{component:"form",onSubmit:O,minHeight:220,p:2,children:[e.jsx("h1",{children:"Elective Subject Form"}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:6,className:"inputCont",children:e.jsx(g,{fullWidth:!0,label:"Subject Name",name:"subjectName",onChange:c,value:s==null?void 0:s.subjectName,required:!0,className:"textField",sx:{"&:hover":{borderColor:"none"}}})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:6,children:e.jsx(g,{select:!0,fullWidth:!0,label:"Select Programme",name:"programId",value:s==null?void 0:s.programId,onChange:c,required:!0,children:h==null?void 0:h.map(t=>e.jsx(E,{value:t==null?void 0:t._id,children:t==null?void 0:t.name},t==null?void 0:t._id))})}),o&&(o==null?void 0:o.length)>0&&e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:6,children:e.jsx(g,{select:!0,fullWidth:!0,label:"Division Program",name:"divisionProgramId",value:s==null?void 0:s.divisionProgramId,onChange:c,children:o==null?void 0:o.map(t=>e.jsx(E,{value:t==null?void 0:t._id,children:t==null?void 0:t.divisionName},t==null?void 0:t._id))})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:6,className:"inputCont",children:e.jsx(D,{component:"fieldset",children:e.jsxs(j,{children:[e.jsx(_,{component:"legend",sx:{fontWeight:"600",marginRight:"1rem",color:"red"},children:e.jsx("h5",{children:"Optional E-Subject:"})}),e.jsxs(v,{row:!0,"aria-label":"options",name:"isOptional",value:s==null?void 0:s.isOptional,onChange:c,children:[e.jsx(T,{value:!0,control:e.jsx(F,{sx:{color:"green","&.Mui-checked":{color:"#04a214"}}}),label:"True",sx:{color:s.isOptional===!0?"#04a214":""}}),e.jsx(T,{value:!1,control:e.jsx(F,{sx:{color:"red","&.Mui-checked":{color:"#f00808"}}}),label:"False",sx:{color:s.isOptional===!1?"#f00808":""}})]})]})})})]}),e.jsxs(L,{type:"submit",disabled:!B,children:[x===!1&&e.jsx(A,{color:"#fff",size:"1.3rem"}),x===!0&&r==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Successfully"})," ",e.jsx(G,{})]}),x===null&&"Create Elective Subject"]})]})})})}export{os as CreateElectiveSubject};
