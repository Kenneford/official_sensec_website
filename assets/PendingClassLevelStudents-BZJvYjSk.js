import{f as V,g as Se,e as je,a as xe,u as Me,r as o,n as x,i as M,cT as Y,cU as J,j as t,B as d,cG as Te,cV as Ie,cI as Ne,cW as Re}from"./index-BrKZIgIs.js";/* empty css                        */import{X as we}from"./index.es-DkKOh-Zr.js";import{c as De}from"./usersInfoTableStyle-D7rSQ0GJ.js";import{d as Ee}from"./LinksFormat-DQzWvp0Y.js";import{F as be}from"./FetchClassLevel-4JV9FIfU.js";import{e as $e}from"./FetchAllStudents-Bf4SUGYj.js";import{d as Ue}from"./UsersInfoDataFormat-6-R0KIZy.js";import{N as ye}from"./NewEnrollmentModal-DOynCpPZ.js";import{S as Ae}from"./SearchFilter-h_gsYJVm.js";import{G as y}from"./Grid-CMH8KWik.js";import"./react-router-hash-link.esm-CcfNRvgg.js";import"./Edit-YA8l4Fd8.js";import"./TaskAlt-CZKWz0j9.js";import"./SchoolOutlined-D5CmX2zz.js";import"./DateFormatter-B-8qT63H.js";import"./DemotionsModal-CxSKSEQU.js";import"./index-B10MRCJG.js";import"./Close-B2v4nXUt.js";/* empty css               */import"./Stack-BeB3Qk7_.js";import"./styled-Cwx8AUm3.js";import"./useThemeProps-DJrrucl-.js";import"./getThemeProps-VIUuhX1y.js";/* empty css                   */import"./Search-svh79qAU.js";function lt(){var H;const n=V(Se),K=Ee(),r=je(),A=xe(),{class_level:u,adminCurrentLink:g,adminCurrentAction:f,student_category:w}=Me(),{enrollmentApprovalStatus:D,successMessage:E,error:a,approveMultiEnrollmentStatus:h,rejectEnrollmentStatus:b,rejectMultiEnrollmentStatus:T}=V(e=>e.student),[Z,S]=o.useState(null);o.useState(!1),o.useState(!1);const[L,Be]=o.useState(""),[ee,Ce]=o.useState(""),[te,k]=o.useState(!1),[se,oe]=o.useState(!1),[B,ne]=o.useState(!1),[ae,re]=o.useState("");o.useState(null);const[le,$]=o.useState(null),[ie,I]=o.useState(!1),[ue,ce]=o.useState(!1),[me,U]=o.useState(null),N=be(),i=$e(B==null?void 0:B._id),C={students:[]},[c,pe]=o.useState(""),m=i==null?void 0:i.filter(e=>{var s,l,j,P,W,G,O,X,z,Q;return((j=(l=(s=e==null?void 0:e.personalInfo)==null?void 0:s.firstName)==null?void 0:l.toLowerCase())==null?void 0:j.includes(c))||((W=(P=e==null?void 0:e.personalInfo)==null?void 0:P.firstName)==null?void 0:W.includes(c))||((X=(O=(G=e==null?void 0:e.personalInfo)==null?void 0:G.lastName)==null?void 0:O.toLowerCase())==null?void 0:X.includes(c))||((Q=(z=e==null?void 0:e.personalInfo)==null?void 0:z.lastName)==null?void 0:Q.includes(c))}),F=i==null?void 0:i.find(e=>e._id===L),v=i==null?void 0:i.find(e=>e._id===ee),de=()=>{oe(!0),re("You're being redirected"),setTimeout(()=>{A(`/sensec/users/${n==null?void 0:n.uniqueId}/admin/${f}/${g}/new_enrollment/placement_verification`)},3e3)},ge=Ue(n),[p,_]=o.useState([]),[R,q]=o.useState(!1),fe=e=>{var s;if(e){const l=(s=e==null?void 0:e.selectedRows)==null?void 0:s.map(j=>({uniqueId:j==null?void 0:j.uniqueId}));_(l)}else _([])};o.useLayoutEffect(()=>{const e=N==null?void 0:N.find(s=>(s==null?void 0:s.name)===(u==null?void 0:u.replace(/_/g," ")));ne(e)},[N,u]),o.useEffect(()=>{if(F){if(D==="pending"&&(S(!1),setTimeout(()=>{S(!0)},3e3)),D==="rejected"){setTimeout(()=>{S(null)},3e3),setTimeout(()=>{var e,s;(s=(e=a==null?void 0:a.errorMessage)==null?void 0:e.message)==null||s.map(l=>x.error(l,{position:"top-right",theme:"light",toastId:l}))},2e3);return}D==="success"&&(setTimeout(()=>{x.success(E,{position:"top-right",theme:"dark",toastId:E})},1e3),setTimeout(()=>{r(M())},6e3))}if(v){if(b==="pending"&&(S(!1),setTimeout(()=>{S(!0)},3e3)),b==="rejected"){setTimeout(()=>{S(null)},3e3),setTimeout(()=>{var e,s;(s=(e=a==null?void 0:a.errorMessage)==null?void 0:e.message)==null||s.map(l=>x.error(l,{position:"top-right",theme:"light"}))},2e3);return}b==="success"&&(setTimeout(()=>{x.success(E,{position:"top-right",theme:"dark"})},1e3),setTimeout(()=>{r(M())},6e3))}},[D,E,a,r,Z,F,b,v]),o.useEffect(()=>{if(p&&h==="pending"&&$(!1),p&&h==="rejected"){setTimeout(()=>{$(null),I(!1),r(Y())},3e3),setTimeout(()=>{var e,s;(s=(e=a==null?void 0:a.errorMessage)==null?void 0:e.message)==null||s.map(l=>x.error(l,{position:"top-right",theme:"dark",toastId:"multiStudentApprovalError"}))},2e3);return}p&&h==="success"&&(setTimeout(()=>{$(!0)},3e3),setTimeout(()=>{r(M()),r(M()),q(!R),r(Y()),I(!1),$(null)},6e3))},[r,h,a,p,R]),o.useEffect(()=>{if(p&&T==="pending"&&U(!1),p&&T==="rejected"){setTimeout(()=>{U(null),I(!1),r(J())},3e3),setTimeout(()=>{var e,s;(s=(e=a==null?void 0:a.errorMessage)==null?void 0:e.message)==null||s.map(l=>x.error(l,{position:"top-right",theme:"dark",toastId:"multiStudentRejectionError"}))},2e3);return}p&&T==="success"&&(setTimeout(()=>{U(!0)},3e3),setTimeout(()=>{r(M()),r(M()),q(!R),r(J()),I(!1),U(null)},6e3))},[r,h,a,p,R,T]);const he=`${u==null?void 0:u.replace(/_/g," ")} Pending Students / Total = 
              ${i==null?void 0:i.length}`;return t.jsxs(t.Fragment,{children:[t.jsxs(d,{component:"div",id:"adminDashboardHeaderWrap",sx:{position:"sticky",top:0,backgroundColor:"#fff",padding:0},minHeight:"4rem",children:[t.jsxs("h1",{className:"dashAction",children:[f==null?void 0:f.replace(/_/g,"-")," /"," ",t.jsx("span",{children:g==null?void 0:g.replace(/_/g," ")})]}),t.jsx(d,{sx:{display:{xs:"none",sm:"block"}},children:t.jsx(Ae,{value:c,onChange:pe,placeholder:"Search"})})]}),t.jsxs(d,{className:"allStudentsData",id:"allStudents",padding:{xs:" 1rem .5rem",sm:" 1rem"},children:[t.jsxs(d,{className:"searchDetails",children:[(m==null?void 0:m.length)===0&&c!==""&&t.jsxs("p",{className:"searchInfo",children:[`We couldn't find any matches for "`,c,'"']}),(m==null?void 0:m.length)===0&&c!==""&&t.jsx("p",{style:{paddingLeft:"1.5rem",display:"flex",alignItems:"center",color:"red"},children:"||"}),c&&t.jsxs("p",{className:"searchInfo",children:["Total Pending Students Found = ",m==null?void 0:m.length]}),!c&&t.jsxs("p",{className:"searchInfo",children:["Total Students = ",(H=C==null?void 0:C.sortedStudents)==null?void 0:H.length]})]}),t.jsx(d,{children:t.jsxs(y,{container:!0,spacing:3,className:"addNewStudentBtnsWrap",width:"100%",m:"0 auto",children:[K.map(e=>t.jsx(y,{component:"span",item:!0,xs:2.9,sm:2,onClick:()=>{e.label==="Add New Student +"?k(!0):A(`/sensec/users/${n==null?void 0:n.uniqueId}/admin/${f}/${g}/${e.label.replace(/ /g,"_")}`)},className:(w==null?void 0:w.replace(/_/g," "))===e.label?"studentDashBtn isActive":(e==null?void 0:e.label)==="Add New Student +"?"studentDashAddBtn":"studentDashBtn",children:e.label==="Enrolled"?"All Enrolled Students":e.label},e.label)),t.jsx(ye,{open:te,onClose:()=>k(!1),handleNewEnrollment:de,redirecting:se,uncompletedEmploymentTask:ae,question:"Are you sure you would like to enroll a new student?"})]})}),t.jsx(d,{children:t.jsx(y,{container:!0,spacing:3,width:"100%",m:"0 auto",className:"classLevelStudents",children:N.map(e=>t.jsx(y,{component:"span",item:!0,xs:2.9,sm:2,onClick:()=>A(`/sensec/users/${n==null?void 0:n.uniqueId}/admin/${f}/${g}/${w}/${e.name.replace(/ /g,"_")}`),className:(e==null?void 0:e.name)===(u==null?void 0:u.replace(/_/g," "))?"classLevelStudentsBtn isActive":"classLevelStudentsBtn",children:e.name},e.name))})}),t.jsxs(d,{sx:{display:"flex",gap:1,fontSize:"calc(0.7rem + 1vmin)"},children:[t.jsx(Te,{approveMultiUsersDataStatus:h,approveMultiUsersDataLoadingComplete:le,multiUsersDataRejectionInProgress:ue,setMultiUsersDataApprovalInProgress:I,multiUsersDataApprovalFunction:Ie({students:p,enrollmentApprovedBy:`${n==null?void 0:n.id}`})}),t.jsx(Ne,{rejectMultiUsersDataStatus:T,rejectMultiUsersDataLoadingComplete:me,multiUsersDataApprovalInProgress:ie,setMultiUsersDataRejectionInProgress:ce,multiUsersDataApprovalFunction:Re({students:p,enrollmentRejectedBy:`${n==null?void 0:n.id}`})})]}),t.jsx(d,{className:"studentDataTable",children:t.jsx(we,{title:he,columns:ge,data:m,customStyles:De,pagination:!0,selectableRows:!0,selectableRowsHighlight:!0,highlightOnHover:!0,onSelectedRowsChange:fe,clearSelectedRows:R})})]})]})}export{lt as PendingClassLevelStudents};
