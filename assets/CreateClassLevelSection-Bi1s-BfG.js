import{f as g,g as P,$ as A,e as F,r as m,a1 as _,n as y,j as s,B,l as E,cc as W}from"./index-BrKZIgIs.js";/* empty css               */import{T as D}from"./TaskAlt-CZKWz0j9.js";import{c as h}from"./muiStyling-B8pUMTN3.js";import{F as M}from"./FetchClassLevel-4JV9FIfU.js";import{F as q}from"./FetchProgrammeData-DzGaqZbQ.js";import{L as $}from"./LoadingProgress-DyOM2CxY.js";import{G as o}from"./Grid-CMH8KWik.js";import{M as C}from"./MenuItem-BVBtbdIH.js";import"./FormLabel-C2cHTcFw.js";import"./index-DcfIKM1A.js";import"./useControlled-BPddiEUe.js";import"./useThemeProps-DJrrucl-.js";import"./getThemeProps-VIUuhX1y.js";import"./index-CXwWd3ii.js";import"./IconButton-D70T8NKk.js";function ee(){const x=g(P),i=M(),r=q(),n=g(A),{error:l,successMessage:T,createStatus:d}=g(e=>e.classSection);console.log([]),console.log(i),console.log(r);const f=F(),[I,u]=m.useState(null),[t,N]=m.useState({sectionName:"",classLevelId:"",programId:"",divisionProgramId:"",createdBy:`${x.id}`});console.log(t);const p=i==null?void 0:i.find(e=>e&&(e==null?void 0:e._id)===(t==null?void 0:t.classLevelId)),b=!!t.sectionName&&!!t.classLevelId&&!!t.programId,v=e=>{e.preventDefault();const a={sectionName:t==null?void 0:t.sectionName,classLevelId:t==null?void 0:t.classLevelId,classLevelName:p==null?void 0:p.name,programId:t==null?void 0:t.programId,divisionProgramId:t==null?void 0:t.divisionProgramId,createdBy:t.createdBy};f(W({data:a}))},c=e=>{const{name:a,value:j}=e.target;N({...t,[a]:j})};return m.useEffect(()=>{t!=null&&t.programId&&f(_({programId:t==null?void 0:t.programId}))},[f,t]),m.useEffect(()=>{if(d==="pending"&&u(!1),d==="rejected"){setTimeout(()=>{var e,a;u(null),(a=(e=l==null?void 0:l.errorMessage)==null?void 0:e.message)==null||a.map(j=>y.error(j,{position:"top-right",theme:"light",toastId:"createClassSectionError"}))},3e3);return}d==="success"&&(setTimeout(()=>{u(!0)},3e3),setTimeout(()=>{u(null),N({sectionName:"",classLevelId:"",programId:"",divisionProgramId:"",createdBy:`${x.id}`})},6e3))},[l,T,d,x]),s.jsx(B,{sx:{width:{xs:"100%",sm:"85%",md:"75%",lg:"60%",xl:"50%"},margin:"auto",paddingTop:"2rem",display:"flex",flexDirection:"column"},className:"createDataWrap",children:s.jsxs(B,{component:"form",onSubmit:v,minHeight:220,p:2,children:[s.jsx("h1",{children:"Class Section Form"}),s.jsxs(o,{container:!0,spacing:3,children:[s.jsx(o,{item:!0,xs:12,sm:6,md:6,lg:6,className:"inputCont",children:s.jsx(h,{fullWidth:!0,label:"Section Name",name:"sectionName",onChange:c,value:t.sectionName,required:!0,className:"textField",sx:{"&:hover":{borderColor:"none"}}})}),s.jsx(o,{item:!0,xs:12,sm:6,md:6,lg:6,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Class Level",name:"classLevelId",value:t==null?void 0:t.classLevelId,onChange:c,required:!0,children:i==null?void 0:i.map(e=>s.jsx(C,{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id))})}),s.jsx(o,{item:!0,xs:12,sm:6,md:6,lg:6,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Select Programme",name:"programId",value:t==null?void 0:t.programId,onChange:c,required:!0,children:r==null?void 0:r.map(e=>s.jsx(C,{value:e==null?void 0:e._id,children:e==null?void 0:e.name},e==null?void 0:e._id))})}),n&&(n==null?void 0:n.length)>0&&s.jsx(o,{item:!0,xs:12,sm:6,md:6,lg:6,children:s.jsx(h,{select:!0,fullWidth:!0,label:"Division Program",name:"divisionProgramId",value:t==null?void 0:t.divisionProgramId,onChange:c,children:n==null?void 0:n.map(e=>s.jsx(C,{value:e==null?void 0:e._id,children:e==null?void 0:e.divisionName},e==null?void 0:e._id))})})]}),s.jsxs(E,{type:"submit",disabled:!b,children:[I===!1&&s.jsx($,{color:"#fff",size:"1.3rem"}),I===!0&&d==="success"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Successful"})," ",s.jsx(D,{})]}),I===null&&"Create Class Section"]})]})})}export{ee as CreateClassLevelSection};
